
{% extends "default" %}

{% block content %}

  {% comment %}
  ===========================================================
  ✨ 動態威脅等級顏色系統 (v1.0)
  ===========================================================
  根據 post front-matter 中的 'severity'，設定對應的 CSS 變數。
  - critical: Neon Pink (預設)
  - high:     Neon Orange
  - medium:   Neon Yellow
  - info/low: Neon Blue
  ===========================================================
  {% endcomment %}

  {%- assign severity = page.severity | downcase -%}

  {%- case severity -%}
    {%- when 'critical' -%}
      {%- assign severity_color = "var(--neon-pink)" -%}
    {%- when 'high' -%}
      {%- assign severity_color = "var(--neon-orange)" -%}
    {%- when 'medium' -%}
      {%- assign severity_color = "var(--neon-yellow)" -%}
    {%- else -%}
      {%- comment %}預設或 'info' 等級{% endcomment %}
      {%- assign severity_color = "var(--neon-blue)" -%}
  {%- endcase -%}

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting" style="border: 1px solid {{ severity_color }}; border-left: 5px solid {{ severity_color }}; box-shadow: 0 0 20px rgba(0, 243, 255, 0.1); clip-path: none; padding: 25px; background: rgba(13, 17, 23, 0.7);">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline" style="color: {{ severity_color }}; text-shadow: 0 0 10px {{ severity_color }};">{{ page.title | escape }}</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
        {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
        [>] System Time: {{ page.date | date: date_format }}
      </time>
      {%- if page.author -%}
        • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{{ page.author | escape }}</span></span>
      {%- endif -%}
    </p>
  </header>

  <div class="post-content e-content" itemprop="articleBody" style="
    --neon-pink: {{ severity_color }}; 
    --neon-green: {{ severity_color }};
  ">
    {{ content }}
  </div>

  {%- if site.disqus.shortname -%}
    {%- include disqus_comments.html -%}
  {%- endif -%}

  <a class="u-url" href="{{ page.url | relative_url }}" hidden></a>
</article>

<style>
  /* 動態修改 post-content 內元素的顏色 */
  .post-content h1,
  .post-content h2,
  .post-content h3 {
    color: {{ severity_color }};
    text-shadow: 0 0 5px {{ severity_color }};
    border-bottom: 1px solid {{ severity_color | replace: 'var(', 'rgba(' | replace: ')', ', 0.3)' }};
    padding-bottom: 5px;
  }
  .post-content blockquote {
      border-left: 4px solid {{ severity_color }};
      background: {{ severity_color | replace: 'var(', 'rgba(' | replace: ')', ', 0.05)' }};
      color: #ccc;
      padding: 10px 15px;
  }
</style>

{% endblock %}
