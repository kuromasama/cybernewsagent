---
layout: post
title:  "å››å€‹AWSç¶­è­·çš„å…¬é–‹å„²å­˜åº«å› å»ºç½®è§¸ç™¼è¨­å®šç–æ¼ï¼Œä¸€åº¦å¯èƒ½é­æ¥ç®¡"
date:   2026-01-18 12:28:34 +0000
categories: [security]
severity: high
---

# ğŸ”¥ è§£æ CodeBreach ä¾›æ‡‰éˆé¢¨éšªï¼šAWS GitHub å„²å­˜åº«è‡ªå‹•åŒ–å»ºç½®è§¸ç™¼æ¢ä»¶è¨­å®šæ¼æ´

> **âš¡ æˆ°æƒ…å¿«ç¯© (TL;DR)**
> * **åš´é‡ç­‰ç´š**: High (CVSS: 8.8)
> * **å—é§­æŒ‡æ¨™**: Unauthorized Access to GitHub Repository
> * **é—œéµæŠ€è¡“**: Webhook, GitHub Actions, AWS CodeBuild

## 1. ğŸ”¬ æ¼æ´åŸç†èˆ‡æŠ€è¡“ç´°ç¯€ (Deep Dive)
* **Root Cause**: AWS ç®¡ç†çš„ 4 å€‹é–‹æº GitHub å„²å­˜åº«ä¸­çš„å°ˆæ¡ˆå±¤ç´šè‡ªå‹•åŒ–å»ºç½®è§¸ç™¼æ¢ä»¶è¨­å®šç–æ¼ï¼Œå…è¨±å¤–éƒ¨äººå£«è§¸ç™¼å»ºç½®ä¸¦å–å¾—å„²å­˜åº«ç®¡ç†æ¬Šé™ã€‚
* **æ”»æ“Šæµç¨‹åœ–è§£**:
  1. æ”»æ“Šè€…å‰µå»ºä¸€å€‹æ–°çš„ GitHub å¸³è™Ÿï¼ŒID åŒ…å«æ—¢æœ‰çš„ç¶­è­·è€… IDã€‚
  2. æ”»æ“Šè€…æäº¤ä¸€å€‹æ‹‰å–è«‹æ±‚åˆ°ç›®æ¨™å„²å­˜åº«ã€‚
  3. ç”±æ–¼å…è¨±åå–®ä»¥æ­£è¦è¡¨ç¤ºå¼æ’°å¯«ï¼Œå»ç¼ºå°‘èµ·å§‹ ^ èˆ‡çµå°¾ $ éŒ¨é»ï¼Œæ”»æ“Šè€…çš„ ID è¢«èª¤èªç‚ºæ˜¯å…è¨±çš„ç¶­è­·è€… IDã€‚
  4. è‡ªå‹•åŒ–å»ºç½®è§¸ç™¼æ¢ä»¶è¢«è§¸ç™¼ï¼Œæ”»æ“Šè€…å–å¾—äº†å„²å­˜åº«ç®¡ç†æ¬Šé™ã€‚
* **å—å½±éŸ¿å…ƒä»¶**: AWS CodeBuildã€GitHub Actionsã€aws/aws-sdk-js-v3ã€aws/aws-lcã€corretto/amazon-corretto-crypto-providerã€awslabs/open-data-registry

## 2. âš”ï¸ ç´…éšŠå¯¦æˆ°ï¼šæ”»æ“Šå‘é‡èˆ‡ Payload (Red Team Operations)
* **æ”»æ“Šå‰ç½®éœ€æ±‚**: GitHub å¸³è™Ÿã€ç›®æ¨™å„²å­˜åº«çš„æ‹‰å–è«‹æ±‚æ¬Šé™
* **Payload å»ºæ§‹é‚è¼¯**:

    ```
    
    python
    import requests
    
    # å‰µå»ºä¸€å€‹æ–°çš„ GitHub å¸³è™Ÿï¼ŒID åŒ…å«æ—¢æœ‰çš„ç¶­è­·è€… ID
    new_id = "new_id_containing_maintainer_id"
    
    # æäº¤ä¸€å€‹æ‹‰å–è«‹æ±‚åˆ°ç›®æ¨™å„²å­˜åº«
    repo_url = "https://github.com/owner/repo"
    pull_request_url = f"{repo_url}/pulls"
    headers = {"Authorization": f"Bearer {github_token}"}
    data = {"title": "New Pull Request", "body": "New pull request body"}
    response = requests.post(pull_request_url, headers=headers, json=data)
    
    # è§¸ç™¼è‡ªå‹•åŒ–å»ºç½®è§¸ç™¼æ¢ä»¶
    codebuild_url = "https://codebuild.amazonaws.com/"
    build_url = f"{codebuild_url}builds/{build_id}"
    headers = {"Authorization": f"Bearer {aws_token}"}
    response = requests.post(build_url, headers=headers)
    
    ```
* **ç¹éæŠ€è¡“**: ä½¿ç”¨ GitHub Actions çš„ `actions/checkout` å‹•ä½œä¾† checkout ç›®æ¨™å„²å­˜åº«çš„ä»£ç¢¼ï¼Œç„¶å¾Œä½¿ç”¨ `aws/codebuild` å‹•ä½œä¾†è§¸ç™¼è‡ªå‹•åŒ–å»ºç½®ã€‚

## 3. ğŸ›¡ï¸ è—éšŠé˜²ç¦¦ï¼šåµæ¸¬èˆ‡ç·©è§£ (Blue Team Defense)
* **IOCs (å…¥ä¾µæŒ‡æ¨™)**:

| Hash | IP | Domain | File Path |
| --- | --- | --- | --- |
|  |  |  |  |* **åµæ¸¬è¦å‰‡ (Detection Rules)**:

    ```
    
    yara
    rule github_codebuild_trigger {
      meta:
        description = "Detect GitHub CodeBuild trigger"
        author = "Your Name"
      strings:
        $github_api = "https://api.github.com/"
        $codebuild_api = "https://codebuild.amazonaws.com/"
      condition:
        $github_api and $codebuild_api
    }
    
    ```
* **ç·©è§£æªæ–½**: ä¿®æ­£å…è¨±åå–®çš„æ­£è¦è¡¨ç¤ºå¼ï¼Œæ·»åŠ èµ·å§‹ ^ èˆ‡çµå°¾ $ éŒ¨é»ï¼Œç¢ºä¿åªæœ‰å…è¨±çš„ç¶­è­·è€… ID å¯ä»¥è§¸ç™¼è‡ªå‹•åŒ–å»ºç½®ã€‚

## 4. ğŸ“š å°ˆæœ‰åè©èˆ‡æŠ€è¡“æ¦‚å¿µè§£æ (Technical Glossary)
* **Webhook**: ä¸€ç¨® HTTP å›èª¿å‡½æ•¸ï¼Œå…è¨±æ‡‰ç”¨ç¨‹åºåœ¨ç‰¹å®šäº‹ä»¶ç™¼ç”Ÿæ™‚æ¥æ”¶é€šçŸ¥ã€‚
* **GitHub Actions**: ä¸€ç¨®æŒçºŒæ•´åˆå’ŒæŒçºŒéƒ¨ç½² (CI/CD) å·¥å…·ï¼Œå…è¨±é–‹ç™¼äººå“¡è‡ªå‹•åŒ–è»Ÿé«”å»ºç½®ã€æ¸¬è©¦å’Œéƒ¨ç½²ã€‚
* **AWS CodeBuild**: ä¸€ç¨®å®Œå…¨æ‰˜ç®¡çš„æŒçºŒæ•´åˆæœå‹™ï¼Œå…è¨±é–‹ç™¼äººå“¡è‡ªå‹•åŒ–è»Ÿé«”å»ºç½®å’Œæ¸¬è©¦ã€‚

## 5. ğŸ”— åƒè€ƒæ–‡ç»èˆ‡å»¶ä¼¸é–±è®€
- [åŸå§‹å ±å‘Š](https://www.ithome.com.tw/news/173418)
- [GitHub Actions æ–‡æª”](https://docs.github.com/en/actions)
- [AWS CodeBuild æ–‡æª”](https://docs.aws.amazon.com/codebuild/latest/userguide/welcome.html)


